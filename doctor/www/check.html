<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>掃描QRcode</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!--PhoneGap APIs-->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<script src="cordova.js"></script>
<script language="JavaScript">
/*
alert("We got a barcode\n" +
                "Result: " + result.text + "\n" +
                "Format: " + result.format + "\n" +
                "Cancelled: " + result.cancelled);
*/
function test(a){
$.post( "http://192.168.43.112/phoneGap/test.PHP",{id:a}, function( data ) {	
          alert(data);
	});
}
function openScanner() {
  cordova.plugins.barcodeScanner.scan(
      function (result) {
          if(!result.cancelled){
		  var s=result.text.substr(0,11);
			$.post( "http://192.168.43.112/phoneGap/test.PHP",{id:s}, function( data ) {	
				alert(data);
			});
		}	
      },
      function (error) {
          alert("Scanning failed: " + error);
      },
      {
          preferFrontCamera : true, // iOS and Android
          showFlipCameraButton : true, // iOS and Android
          showTorchButton : true, // iOS and Android
          torchOn: true, // Android, launch with the torch switched on (if available)
          prompt : "Place a barcode inside the scan area", // Android
          resultDisplayDuration: 500, // Android, display scanned text for X ms. 0 suppresses it entirely, default 1500
          formats : "QR_CODE,PDF_417", // default: all but PDF_417 and RSS_EXPANDED
          orientation : "portrait", // Android only (portrait|landscape), default unset so it rotates with the device
          disableAnimations : true // iOS
      }
   );
 }
</script>
</head>
<body>
<script type="text/javascript" src="cordova.js"></script>
<!--<button onClick="openScanner()">掃描QRcode</button>-->
<div class="w3-button w3-margin-bottom w3-center" id="QR">
<h3 class="w3-col w3-navbar w3-white w3-wide w3-padding-8 w3-card-2" onClick="openScanner()">
<a href="" class="w3-center">掃描QRcode</a>
</h3>
<button onClick="test('12345111111')" >test</button>
<button onClick="test('13579222111')" >test</button>

</div>
</body>
</html>